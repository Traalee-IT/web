CREATE DATABASE DH
go
use DH 
 
CREATE TABLE TAIKHOAN

( 
 Email varchar(30) PRIMARY KEY,
 TENDANGNHAP nvarchar(40),
  MATKHAU NVARCHAR(50)
)
GO
CREATE TABLE NHANVIEN
( MANV int identity(1,1) PRIMARY KEY,
  TENNV NVARCHAR(50),
  NGAYSINH DATE,
  SDT varchar(20),
  EMAIL NVARCHAR(50)
)
 GO
 CREATE TABLE KHACHHANG 
 (
 MAKHACHHANG int identity(1,1) PRIMARY KEY,
 TENKHACHHANG NVARCHAR(50),
 DIACHI NVARCHAR(50),
  SDT varchar(20),
 EMAIL NVARCHAR(50)
 )
 CREATE TABLE HANG
(MAHANG int identity(1,1) PRIMARY KEY,
 TENHANG NVARCHAR(50),
 SOLUONG int,
 DONGIA FLOAT,
 HANGSANXUAT NVARCHAR(50),
 NGAYSANXUAT DATE,
 ANHSANPHAM VARCHAR(MAX)
 )
 GO

 CREATE TABLE HOADON
 ( 
	 MAHD int identity(1,1) PRIMARY KEY,
	  MANV int FOREIGN KEY REFERENCES NHANVIEN(MANV),
	  MAKHACHHANG  int FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG),
	  NGAYBAN DATE,
	  THANHTIEN FLOAT)
GO
CREATE TABLE CHITIETHOADON
	 (MAHD int  FOREIGN KEY REFERENCES HOADON(MAHD),
	 MAHANG int FOREIGN KEY REFERENCES HANG(MAHANG),
	 SOLUONG INT,
	 GIATIEN FLOAT,
	 primary key (MAHD,MAHANG))
 CREATE TABLE NHACUNGCAP
	 ( MANCC int identity(1,1) PRIMARY KEY,
	  TENNCC NVARCHAR(50),
	  DIACHI NVARCHAR(50),
	  SODIENTHOAI VARCHAR(20))
	  GO


 CREATE TABLE PHIEUNHAP
	  ( MAPHIEUNHAP int identity(1,1) PRIMARY KEY,
	  MANCC int  FOREIGN KEY REFERENCES NHACUNGCAP(MANCC),
	  MANV int FOREIGN KEY REFERENCES NHANVIEN(MANV),
	  NGAYNHAP DATE,
	  TONGTIEN FLOAT)
	  GO
 CREATE TABLE CHITIETPHIEUNHAP
	   ( MAHANG int FOREIGN KEY REFERENCES HANG(MAHANG),
	    MAPHIEUNHAP int FOREIGN KEY (MAPHIEUNHAP) REFERENCES PHIEUNHAP(MAPHIEUNHAP),
		PRIMARY KEY (MAPHIEUNHAP,MAHANG),
	    SOLUONGNHAP INT)
	   GO

CREATE TABLE PHIEUXUAT
	  ( MAPHIEUXUAT int identity(1,1) primary key,
	   MANV int FOREIGN KEY REFERENCES NHANVIEN(MANV),
	   NGAYXUAT DATE)
GO

CREATE TABLE CHITIETPHIEUXUAT
( MAPHIEUXUAT int FOREIGN KEY REFERENCES PHIEUXUAT(MAPHIEUXUAT),
  MAHANG int FOREIGN KEY REFERENCES HANG(MAHANG),
  SOLUONG INT,
  primary key (MAPHIEUXUAT,MAHANG))
	   Go
CREATE TABLE THEBAOHANH
(
MABAOHANH int identity(1,1) PRIMARY KEY,
MAKHACHHANG int FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG),
MAHANG int FOREIGN KEY REFERENCES HANG(MAHANG),
NGAYLAP DATE
)